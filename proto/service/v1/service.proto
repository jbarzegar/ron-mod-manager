syntax = "proto3";
package service.v1;

import "service/v1/mod.proto";

message AddArchiveRequest {
  string id = 1;
  string archive_path = 2;
  string name = 4;
}

// AddArchiveResponse returns the instance of the installed archive
// and a list of potential choices
message AddArchiveResponse {
  int32 mod_id = 1;
  string mod_version_id = 2;
  Archive archive = 3;
  repeated Choice choices = 4;
}

message GetAllModsRequest {}

message GetAllModsResponse {
  repeated Mod data = 1;
  // repeated string = 1;
  // repeated Mod mods = 1;
}

message GetStagedModsRequest {}
message GetStagedModsResponse {
  repeated StagedMod data = 1;
}

message InstallModRequest {
  int32 mod_id = 1;
  string mod_version_id = 2;
  repeated string choices_to_activate = 3;
}
message InstallModResponse {}

message UninstallModRequest {
  repeated int32 mod_ids = 1;
}
message UninstallModResponse {}

message ModToDelete {
  int32 id = 1;
  bool delete_archive = 2;
  DeleteModType delete_states = 3;
}
message DeleteModRequest {
  repeated ModToDelete mods_to_delete = 1;
}
message DeleteModResponse {}

service Service {
  rpc AddArchive(AddArchiveRequest) returns (AddArchiveResponse);

  rpc GetAllMods(GetAllModsRequest) returns (GetAllModsResponse);
  rpc GetStagedMods(GetStagedModsRequest) returns (GetStagedModsResponse);
  rpc InstallMod(InstallModRequest) returns (InstallModResponse);
  rpc UninstallMod(UninstallModRequest) returns (UninstallModResponse);
  rpc DeleteMod(DeleteModRequest) returns (DeleteModResponse);
}
